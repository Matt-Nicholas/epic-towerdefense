<!DOCTYPE html>
<html lang="en">
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, maximum-scale=1.0, user-scalable=no" />
        <title>Tower Defense</title>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/phaser/2.0.6/phaser.min.js"></script>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <style>
            *{
                margin : 0;
            }
        </style>
        <script type="text/javascript" src="js/Tower.class.js"></script>
    </head>
    <body>
      <h1>Schmower Defense</h1>
    </body>
    <script type="text/javascript">
        var game = new Phaser.Game(800, 600, Phaser.CANVAS, 'gameContainer', {preload: preload, create: create, update: update, render: render});
        var tileSquare = 32;
        var map, layer;

        var towers;
        var canAddTower = true;
        var towerSelected = "bitchin";
        var tileForbiden = ["9", "10"];

        function preload() {
            game.load.tilemap('level1', 'assets/maps/tower-defense.json', null, Phaser.Tilemap.TILED_JSON);
            game.load.image('tiles', 'assets/maps/map_tiles.png');

            game.load.image('meh', 'assets/sprites/tower-32.png');
            game.load.image('bitchin', 'assets/sprites/tower1-32.png');

            /*
             * Enemy Preload
             */

        }

        function create() {

            /**
             * Init map
             */
            game.physics.startSystem(Phaser.Physics.ARCADE)
            map = game.add.tilemap('level1');
            map.addTilesetImage('Level1', 'tiles');
            layer = map.createLayer('Ground');
            layer.resizeWorld();
            //game.input.onDown.add(listener, this);
            /*
             * Tower
             */
             towers = game.add.group();
            game.physics.enable(towers, Phaser.Physics.ARCADE);

            /*
             * Towers Bullets
             */


            /*
             * Enemy
             */

            game.input.onDown.add(listener, this);
        }

        function render() {

        }
        function update() {

        }
        function listener(pointer) {

          if (canAddTower) {
              /*
               * Add tower
               */
              console.log("Add tower");
              Tower.prototype.add(pointer);
              canAddTower = false;
          }
        }




    </script>
</html>
